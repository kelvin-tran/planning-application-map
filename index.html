<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Kelvin Tran - GitHub</title>
    
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-64459548-1', 'auto');
      ga('send', 'pageview');
    </script>
    <style type="text/css">
     #map-canvas { height: 100%; margin: 0; padding: 0;}
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="javascripts/jquery-csv.js"></script>
    <script type="text/javascript">
      var csv_data;
      function initialize() {
        $.get('https://raw.githubusercontent.com/kelvin-tran/planning-application-map/master/melbourne_apps.csv', function(data) {
          var centerLatlng = new google.maps.LatLng(-37.795218, 144.94777399999998);
          var mapOptions = {
            zoom: 14,
            center: centerLatlng,
            mapTypeControlOptions: {
              mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'custom_style']
            },
            mapTypeId: 'custom_style'
          };
          var map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);
          var featureOpts = [
            {
              stylers: [
                { hue: "#00ffe6" },
                { saturation: -20 }
              ]
            },
            {
              elementType: 'labels',
              stylers: [
                { visibility: 'on' }
              ]
            },
            {
              featureType: "all",
              stylers: [
                { saturation: -30 }
              ]
            }
          ];
          
          var styledMapOptions = {
            name: 'Custom Style'
          };
        
          var customMapType = new google.maps.StyledMapType(featureOpts, styledMapOptions);
          
          csv_data = jQuery.csv.toObjects(data);
          csv_data.forEach(function(d) {
            var address = d.Address;
            var lat = parseFloat(d.Lat);
            var long = parseFloat(d.Long);
            var icon = {
              url: 'http://maps.google.com/mapfiles/kml/paddle/blu-circle.png',
              size: new google.maps.Size(64, 64),
              origin: new google.maps.Point(0,0),
              anchor: new google.maps.Point(0, 32),
              scaledSize: new google.maps.Size(20, 20),
            };
            var markerOptions = new google.maps.Marker({
              position: new google.maps.LatLng(lat, long),
              map: map,
              icon: icon,
              title: d.Address,
            });
            var appMarker = new google.maps.Marker(markerOptions);
            var contentString = '<div id="content">'+
              '<div id="siteNotice">'+
              '</div>'+
              '<div id="bodyContent">'+
	      '<p><b><a href=' + d.Link + '>' + 
              d.Address + '</a>'+
              '</b></p>' +
	      '<p>' + d.PermitNo + '</p>' +
              '<p>' + d.Description + '</p>' +
              '<p>Granted yet? ' + d.Issued +
              '</p>'+
              '</div>'+
              '</div>';
    
            var infowindow = new google.maps.InfoWindow({
                content: contentString,
                maxWidth: 200
            });
            google.maps.event.addListener(appMarker, 'click', function() {
              infowindow.open(map,appMarker);
            });
          });
        
        map.mapTypes.set('custom_style', customMapType);
        }, 'text');
      }
      
      function loadScript() {
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyBYDKuP2KKu93_LzHeh1UfDSQE_aF_8lOs' +
            '&callback=initialize';
        document.body.appendChild(script);
      }
      window.onload = loadScript;
    </script>
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Kelvin Tran</h1>
        <p>
        <img src="static/profile.jpg" style="width:140px;height:140px;border-radius: 10px;">
        </p>
        <p>I am a lawyer, but I do other things</p>
        <p class="view"><a href="http://github.com/kelvin-tran">GitHub</a> | <a href="http://twitter.com/_kelvintran">Twitter</a> | <a href="https://au.linkedin.com/in/kelvintran">LinkedIn</a></p>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <!-- Kelvin Tran GitHub pages index -->
          <ins class="adsbygoogle"
               style="display:block"
               data-ad-client="ca-pub-8039812474190322"
               data-ad-slot="3954668498"
               data-ad-format="auto"></ins>
          <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </header>
      <section>
        <h1>A map of all City of Melbourne planning permit applications</h1>
        <p><em>View the <a href="http://github.com/kelvin-tran/planing-map/">source of this content</a>.</em></p>
        <p>A few years ago, I lived in house in Peel Street, North Melbourne.  The house was great - double storey, backyard, large bedrooms, French windows.  Except for one thing - the noise.  I forgot what sleep was like for a whole year.</p>
        <p>This map should help you identify any noisy neighbour problems before you sign the lease or contract for sale.  It lists all planning permit applications filed within the past year and a half (last updated 24 June 2015), including both:</p>
        <ul>
          <li>concluded applications (expect some hammer smashing and electric saw buzzing)</li>
          <li>open applications (you could be annoying and object)</li>
        </ul>
        <p>Planning permits are generally required whenever a new use or development of land is proposed.  If you find one on this map, then its likely someone will be doing some development work soon.</p>
        <div id="map-canvas" style="height: 500px; width=500px">Map Canvas</div>
        <p><br>The site is based on information from the City of Melbourne <a href="https://www.melbourne.vic.gov.au/BuildingandPlanning/Planning/Pages/PlanningRegisterSearch.aspx">planning register</a>.  And because I am a lawyer and overly cautious: I make no representations about the accuracy of the information on this site and depicted in the map.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="http://github.com/kelvin-tran">Kelvin Tran</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
  </body>
</html>
